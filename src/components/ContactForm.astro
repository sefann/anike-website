---
---

<form id="contact-form" class="space-y-6">
  <div>
    <label for="name" class="block text-sm font-medium text-gray-700 mb-2">
      Name *
    </label>
    <input 
      type="text" 
      id="name" 
      name="name" 
      required
      class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all"
    />
  </div>
  
  <div>
    <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
      Email *
    </label>
    <input 
      type="email" 
      id="email" 
      name="email" 
      required
      class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all"
    />
  </div>
  
  <div>
    <label for="subject" class="block text-sm font-medium text-gray-700 mb-2">
      Subject *
    </label>
    <input 
      type="text" 
      id="subject" 
      name="subject" 
      required
      class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all"
    />
  </div>
  
  <div>
    <label for="message" class="block text-sm font-medium text-gray-700 mb-2">
      Message *
    </label>
    <textarea 
      id="message" 
      name="message" 
      rows="6"
      required
      class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all resize-none"
    ></textarea>
  </div>
  
  <button 
    type="submit"
    class="btn btn-primary btn-lg w-full sm:w-auto"
  >
    Send Message
  </button>
  
  <div id="form-message" class="hidden mt-4 p-4 rounded-lg"></div>
</form>

<script>
  import emailjs from '@emailjs/browser';
  
  const form = document.getElementById('contact-form');
  const messageDiv = document.getElementById('form-message');
  
  // Get EmailJS config from environment variables
  const serviceId = import.meta.env.PUBLIC_EMAILJS_SERVICE_ID;
  const templateId = import.meta.env.PUBLIC_EMAILJS_TEMPLATE_ID;
  const publicKey = import.meta.env.PUBLIC_EMAILJS_PUBLIC_KEY;
  
  if (form) {
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const submitButton = form.querySelector('button[type="submit"]');
      const originalText = submitButton?.textContent;
      if (submitButton) {
        submitButton.disabled = true;
        submitButton.textContent = 'Sending...';
      }
      
      const formData = new FormData(form);
      const data = {
        name: formData.get('name'),
        email: formData.get('email'),
        subject: formData.get('subject'),
        message: formData.get('message'),
      };
      
      try {
        // Use EmailJS if configured, otherwise show success message
        if (serviceId && templateId && publicKey) {
          await emailjs.send(serviceId, templateId, data, publicKey);
        }
        
        messageDiv.className = 'mt-4 p-4 rounded-lg bg-green-50 text-green-700 border border-green-200';
        messageDiv.textContent = 'Thank you! Your message has been sent successfully.';
        messageDiv.classList.remove('hidden');
        form.reset();
        
        setTimeout(() => {
          messageDiv.classList.add('hidden');
        }, 5000);
      } catch (error) {
        console.error('EmailJS error:', error);
        messageDiv.className = 'mt-4 p-4 rounded-lg bg-red-50 text-red-700 border border-red-200';
        messageDiv.textContent = 'Sorry, there was an error sending your message. Please try again.';
        messageDiv.classList.remove('hidden');
      } finally {
        if (submitButton) {
          submitButton.disabled = false;
          submitButton.textContent = originalText || 'Send Message';
        }
      }
    });
  }
</script>

